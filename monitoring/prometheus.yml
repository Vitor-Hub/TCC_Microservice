global:
  scrape_interval: 5s
  evaluation_interval: 5s
  scrape_timeout: 4s
  
  external_labels:
    monitor: 'tcc-microservices'
    environment: 'development'

# Configuração dos endpoints a serem monitorados
scrape_configs:
  # ========================================
  # MICROSSERVIÇOS - Spring Boot Actuator
  # ========================================
  
  - job_name: 'user-service'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['micro_user_service:18081']
        labels:
          service: 'user-ms'
          tier: 'backend'
    
  - job_name: 'post-service'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['micro_post_service:18082']
        labels:
          service: 'post-ms'
          tier: 'backend'
    
  - job_name: 'comment-service'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['micro_comment_service:18083']
        labels:
          service: 'comment-ms'
          tier: 'backend'
    
  - job_name: 'friendship-service'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['micro_friendship_service:18084']
        labels:
          service: 'friendship-ms'
          tier: 'backend'
    
  - job_name: 'like-service'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['micro_like_service:18085']
        labels:
          service: 'like-ms'
          tier: 'backend'
    
  - job_name: 'gateway-service'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['micro_api_gateway:8765']
        labels:
          service: 'gateway-ms'
          tier: 'gateway'
  
  # ========================================
  # EUREKA SERVER
  # ========================================
  
  - job_name: 'eureka-server'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['microeureka:8761']
        labels:
          service: 'eureka'
          tier: 'infrastructure'
  
  # ========================================
  # PROMETHEUS (Self-monitoring)
  # ========================================
  
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          service: 'prometheus'
          tier: 'monitoring'